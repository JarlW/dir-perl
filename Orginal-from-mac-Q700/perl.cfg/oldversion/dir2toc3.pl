#Tjalles läsa Mac folders# 08-nov-97# 11-nov-97$dirSep =':';				   #for MACOS$rootDir='FATSO:perl:tjs';     #MACOS$configFile ='toc.cfg';$tocFile = 'toc.html';$tocTarget= "hankToc";  $mainTarget ='hankText';print "\nstart....\n";#@dirsUp = split(/:/,$currPath);#for (@dirsUp){#		print "$_\n";#}	opendir(DIR,$rootDir) || die "Can't open current \ndirectory: $rootDir";	@filenames = readdir(DIR);	closedir(DIR);	chdir $rootDir;	#open the toc.file in ROOT dir	$tempTocFile = ">$tocFile";	open (ROOTTOCH, $tempTocFile);	print ROOTTOCH startHtml($currDir);for (@filenames) {	chdir $rootDir;	next if $_ eq '.';	next if $_ eq '..';	next if $_ eq 'toc.cfg';	next if $_ eq 'frame.html';	next if $_ eq $tocFile;	if (!(-d $_)){		$title = getTitle($_);		print ROOTTOCH itemLine($_,$title);	print "RF-$_,$title\n";	}	else{		$dirtitle = getDirTitle($_);		print ROOTTOCH itemLine("$_/$tocFile",$dirtitle);		print "RD-$_,$dirtitle \n";		$currPath ="";		$currDir =$_;		$dirinfo=&doFolder($currPath,$currDir);		chdir "$rootDir$currPath";	}} #filenamesprint ROOTTOCH endHtml();close ROOTTOCH;print "\n....END\n";#subssub doFolder{ local($currPath, $currDir) = @_;# open a dir and read	opendir(DIR,$currDir) || die "Can't open current \ndirectory: $CurrDir";	@currDir = readdir(DIR);	closedir(DIR);	chdir $currDir;#open a toc.file in curr dir	$tempTocFile = ">$tocFile";	open (TOCH, $tempTocFile);	print TOCH startHtml($currDir);#			@dirsUp = split(/:/,$fullPath);#				for (@dirsUp){#			 $a ="/$_/$tocFile";#				print TocH "$a\n";#}	for (@currDir) {		next if $_ eq '.';		next if $_ eq '..';		next if $_ eq 'toc.cfg';		next if $_ eq 'toc.html';				if (!(-d $_)){			$title = getTitle($_);			print TOCH itemLine($_,$title);				}		else{				$title = getDirTitle($_);			print TOCH itemLine("$_/$tocFile",$title);				#print  "    $_\n";		}			} # End forLoopprint TOCH endHtml();close TOCH;} #end SUB doFolder# hämtar TITLE i en filsub getTitle {	my($in) = @_;			open(CurrFILE,$in);			$f ="45";			read (CurrFILE,$get,$f);			close CurrFILE;			if($get=~ m/<TITLE>(.*)<\/TITLE>/) {				$title=$1;			} 			else {				$title="undef"			}	return $title;}# hämtar TITLE från en cfgfil för en dirsub getDirTitle {	my($in) = @_;			$a =":$in:$configFile";    #MACOS			open(CurrFILE,$a);			$f ="45";			read (CurrFILE,$get,$f);			close CurrFILE;			if($get=~ m/<TITLE>(.*)<\/TITLE>/) {				$dirtitle=$1;			} 			else {				$dirtitle="undef";			}	return $dirtitle;}# HTML SUBS, gör inga fil checkar härsub startHtml {	my($in) = @_;	$out ="<HTML>\n<HEAD>\n<TITLE>toc for-$in</TITLE>\n<BASE TARGET=\"$mainTarget\"></HEAD>\n<Body>\n";	return $out;} #end StartHtmlsub endHtml {	my($in) = @_;	$out ="\n</BODY>\n</HTML>";	return $out;} #end endHtmlsub itemLine {	my($i1,$i2) = @_;	$out ="<A HREF=\"$i1\">$i2</A><BR>\n";	return $out;} #end itemLine